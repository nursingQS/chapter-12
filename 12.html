<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pediatric Nursing Flashcards - Chapter 12: Health Promotion of the Toddler and Family</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', 'Arial', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
            min-height: 100vh;
            padding: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            height: 96vh;
            background: #f1f8e9;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(76, 175, 80, 0.2);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            border: 3px solid #81c784;
        }
        
        .header {
            background: linear-gradient(135deg, #388e3c, #4caf50);
            color: white;
            padding: 12px 15px;
            text-align: center;
            position: relative;
            overflow: hidden;
            flex-shrink: 0;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100" opacity="0.1"><circle cx="30" cy="30" r="10" fill="white"/><circle cx="70" cy="30" r="8" fill="white"/><circle cx="50" cy="60" r="15" fill="white"/><rect x="35" y="75" width="30" height="10" rx="5" fill="white"/></svg>');
            background-size: 80px 80px;
        }
        
        .header h1 {
            font-size: 1.5rem;
            margin-bottom: 4px;
            position: relative;
            color: #e8f5e9;
            line-height: 1.2;
        }
        
        .header .subtitle {
            font-size: 0.9rem;
            opacity: 0.9;
            position: relative;
            color: #c8e6c9;
            margin-bottom: 8px;
        }
        
        .progress {
            background: #388e3c;
            height: 6px;
            width: 100%;
            flex-shrink: 0;
            border-radius: 0 0 5px 5px;
        }
        
        .progress-bar {
            background: linear-gradient(90deg, #a5d6a7, #4caf50);
            height: 100%;
            width: 0%;
            transition: width 0.4s ease;
            border-radius: 0 5px 5px 0;
        }
        
        .section-nav {
            display: flex;
            gap: 6px;
            padding: 8px 10px;
            background: linear-gradient(135deg, #1b5e20, #388e3c);
            border-bottom: 1px solid #81c784;
            flex-shrink: 0;
            overflow-x: auto;
            align-items: center;
            justify-content: center;
        }
        
        .section-btn {
            padding: 5px 10px;
            border: 2px solid #81c784;
            background: rgba(255, 255, 255, 0.95);
            color: #1b5e20;
            border-radius: 15px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 0.75rem;
            white-space: nowrap;
            flex-shrink: 0;
            min-width: 120px;
            text-align: center;
        }
        
        .section-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(129, 199, 132, 0.4);
        }
        
        .section-btn.active {
            background: linear-gradient(135deg, #81c784, #4caf50);
            color: white;
            border-color: #388e3c;
            box-shadow: 0 6px 12px rgba(129, 199, 132, 0.5);
        }
        
        .flashcard {
            padding: 12px;
            flex: 1;
            display: flex;
            flex-direction: column;
            background: #f1f8e9;
            overflow: hidden;
            min-height: 0;
        }
        
        .question-container {
            display: flex;
            gap: 10px;
            align-items: flex-start;
            margin-bottom: 8px;
            background: white;
            padding: 12px;
            border-radius: 10px;
            border-left: 6px solid #a5d6a7;
            box-shadow: 0 4px 8px rgba(76, 175, 80, 0.1);
            flex-shrink: 0;
        }
        
        .question-icon {
            background: linear-gradient(135deg, #388e3c, #66bb6a);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            font-weight: bold;
            flex-shrink: 0;
            box-shadow: 0 4px 8px rgba(56, 142, 60, 0.4);
        }
        
        .question {
            font-size: 0.9rem;
            line-height: 1.4;
            color: #1b5e20;
            flex-grow: 1;
            font-weight: 500;
            overflow-wrap: break-word;
            hyphens: auto;
        }
        
        .multiple-select-indicator {
            background: #f44336;
            color: white;
            padding: 3px 8px;
            border-radius: 15px;
            font-size: 0.7rem;
            font-weight: bold;
            margin-left: 6px;
            white-space: nowrap;
            box-shadow: 0 3px 6px rgba(244, 67, 54, 0.3);
            flex-shrink: 0;
        }
        
        .options {
            display: flex;
            flex-direction: column;
            gap: 6px;
            margin-bottom: 8px;
            flex: 1;
            overflow: hidden;
            min-height: 0;
        }
        
        .option {
            padding: 8px 10px;
            border: 2px solid #c8e6c9;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            display: flex;
            align-items: flex-start;
            gap: 10px;
            font-size: 0.85rem;
            line-height: 1.3;
            flex-shrink: 0;
            min-height: 45px;
        }
        
        .option:hover {
            background: #e8f5e9;
            border-color: #81c784;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(129, 199, 132, 0.2);
        }
        
        .option-letter {
            background: #c8e6c9;
            color: #388e3c;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
            transition: all 0.3s ease;
            font-size: 0.8rem;
            border: 2px solid #a5d6a7;
        }
        
        /* CORRECT - ALWAYS GREEN */
        .option.correct {
            background: #c8e6c9;
            border-color: #388e3c;
            color: #1b5e20;
        }
        
        .option.correct .option-letter {
            background: #388e3c;
            color: white;
            border-color: #388e3c;
        }
        
        /* INCORRECT - ALWAYS RED */
        .option.incorrect {
            background: #ffcdd2;
            border-color: #d32f2f;
            color: #b71c1c;
        }
        
        .option.incorrect .option-letter {
            background: #d32f2f;
            color: white;
            border-color: #d32f2f;
        }
        
        .option.selected {
            background: #e8f5e9;
            border-color: #81c784;
            color: #388e3c;
        }
        
        .option.selected .option-letter {
            background: #81c784;
            color: white;
            border-color: #4caf50;
        }
        
        .feedback {
            padding: 8px 10px;
            border-radius: 8px;
            margin-bottom: 8px;
            display: none;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            font-size: 0.85rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            flex-shrink: 0;
        }
        
        .feedback.correct {
            background: #c8e6c9;
            border: 3px solid #388e3c;
            color: #1b5e20;
            display: flex;
        }
        
        .feedback.incorrect {
            background: #ffcdd2;
            border: 3px solid #d32f2f;
            color: #b71c1c;
            display: flex;
        }
        
        .feedback-icon {
            font-size: 1.2rem;
            flex-shrink: 0;
        }
        
        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 12px;
            background: #c8e6c9;
            border-top: 2px solid #a5d6a7;
            flex-shrink: 0;
            gap: 8px;
        }
        
        .counter {
            font-weight: bold;
            color: #388e3c;
            font-size: 0.9rem;
            background: white;
            padding: 5px 10px;
            border-radius: 20px;
            border: 2px solid #81c784;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
            flex-shrink: 0;
        }
        
        .btn {
            padding: 8px 12px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.8rem;
            white-space: nowrap;
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #388e3c, #66bb6a);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(56, 142, 60, 0.4);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #4caf50, #388e3c);
            color: white;
        }
        
        .btn-secondary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(76, 175, 80, 0.4);
        }
        
        .btn-warning {
            background: linear-gradient(135deg, #ffb300, #ff8f00);
            color: #212529;
        }
        
        .btn-warning:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(255, 179, 0, 0.4);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #f44336, #d32f2f);
            color: white;
        }
        
        .btn-danger:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(244, 67, 54, 0.4);
        }
        
        .rationale {
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            border: 3px solid #ffb300;
            border-radius: 10px;
            padding: 10px;
            margin-top: 8px;
            display: none;
            box-shadow: 0 4px 12px rgba(255, 179, 0, 0.2);
            flex-shrink: 0;
            overflow: hidden;
            max-height: 120px;
        }
        
        .rationale.show {
            display: block;
            animation: slideIn 0.5s ease;
        }
        
        .rationale h4 {
            color: #ff8f00;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.9rem;
        }
        
        .rationale p {
            color: #856404;
            line-height: 1.4;
            font-size: 0.8rem;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .stats {
            display: flex;
            gap: 6px;
            justify-content: center;
            margin-top: 4px;
            flex-wrap: wrap;
            flex-shrink: 0;
        }
        
        .stat {
            background: rgba(255, 255, 255, 0.2);
            padding: 4px 8px;
            border-radius: 15px;
            font-size: 0.7rem;
            white-space: nowrap;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .cancel-selection {
            background: linear-gradient(135deg, #f44336, #d32f2f);
            color: white;
            margin: 0 auto 8px auto;
            display: none;
            box-shadow: 0 4px 10px rgba(244, 67, 54, 0.3);
            flex-shrink: 0;
        }
        
        .cancel-selection:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(244, 67, 54, 0.4);
        }
        
        .cancel-selection.show {
            display: flex;
        }
        
        .multiple-select-instructions {
            text-align: center;
            color: #f44336;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 0.8rem;
            background: #fff3cd;
            padding: 6px;
            border-radius: 8px;
            border: 2px solid #ffeaa7;
            flex-shrink: 0;
        }
        
        .matching-container {
            background: linear-gradient(135deg, #f1f8e9, #e8f5e9);
            border-radius: 8px;
            padding: 10px;
            border: 2px solid #c8e6c9;
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            min-height: 0;
        }
        
        .matching-question {
            font-size: 0.85rem;
            color: #1b5e20;
            font-weight: 500;
            margin-bottom: 10px;
            padding: 8px;
            background: white;
            border-radius: 8px;
            border: 2px solid #c8e6c9;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            max-height: 3em;
            flex-shrink: 0;
        }
        
        .matching-options {
            flex: 1;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 5px;
            overflow: hidden;
            padding: 2px;
            min-height: 0;
        }
        
        .matching-option {
            padding: 8px;
            border: 2px dashed #a5d6a7;
            border-radius: 6px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
            font-size: 0.8rem;
            font-weight: 500;
            color: #4caf50;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 40px;
            overflow: hidden;
            line-height: 1.2;
        }
        
        .matching-option:hover {
            background: #e8f5e9;
            border-style: solid;
            border-color: #81c784;
        }
        
        .matching-option.correct {
            background: linear-gradient(135deg, #c8e6c9, #a5d6a7);
            border-color: #388e3c;
            border-style: solid;
            color: #1b5e20;
        }
        
        .matching-option.incorrect {
            background: linear-gradient(135deg, #ffcdd2, #ef9a9a);
            border-color: #d32f2f;
            border-style: solid;
            color: #b71c1c;
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1) !important;
        }
        
        /* Remove all scrollbars */
        .options,
        .matching-options,
        .rationale,
        .container,
        .flashcard,
        body {
            overflow: hidden !important;
            -ms-overflow-style: none !important;
            scrollbar-width: none !important;
        }
        
        .options::-webkit-scrollbar,
        .matching-options::-webkit-scrollbar,
        .rationale::-webkit-scrollbar {
            display: none !important;
            width: 0 !important;
            height: 0 !important;
        }
        
        @media (max-width: 768px) {
            .container {
                height: 98vh;
            }
            
            .section-btn {
                min-width: 100px;
                font-size: 0.7rem;
                padding: 4px 8px;
            }
            
            .matching-options {
                grid-template-columns: 1fr;
            }
            
            .header {
                padding: 10px 12px;
            }
            
            .header h1 {
                font-size: 1.2rem;
            }
            
            .navigation {
                padding: 8px 10px;
                flex-wrap: wrap;
                justify-content: center;
                gap: 6px;
            }
            
            .counter {
                order: -1;
                width: 100%;
                text-align: center;
                margin-bottom: 4px;
                font-size: 0.8rem;
            }
            
            .btn {
                padding: 6px 10px;
                font-size: 0.75rem;
            }
            
            .question {
                font-size: 0.85rem;
            }
            
            .option {
                font-size: 0.8rem;
                padding: 6px 8px;
                min-height: 40px;
            }
            
            .question-icon {
                width: 35px;
                height: 35px;
                font-size: 0.9rem;
            }
            
            .option-letter {
                width: 22px;
                height: 22px;
                font-size: 0.75rem;
            }
        }
        
        @media (max-height: 700px) {
            .container {
                height: 99vh;
            }
            
            .header {
                padding: 8px 10px;
            }
            
            .header h1 {
                font-size: 1.1rem;
            }
            
            .header .subtitle {
                font-size: 0.8rem;
            }
            
            .question-container {
                padding: 10px;
                margin-bottom: 6px;
            }
            
            .question {
                font-size: 0.8rem;
                line-height: 1.3;
            }
            
            .option {
                padding: 6px 8px;
                min-height: 35px;
                font-size: 0.75rem;
            }
            
            .navigation {
                padding: 6px 8px;
            }
            
            .rationale {
                max-height: 80px;
                padding: 8px;
            }
            
            .feedback {
                padding: 6px 8px;
                font-size: 0.75rem;
            }
            
            .option-letter {
                width: 20px;
                height: 20px;
                font-size: 0.7rem;
            }
            
            .stats {
                display: none;
            }
        }
        
        @media (max-height: 600px) {
            .question-container {
                padding: 8px;
            }
            
            .question-icon {
                width: 30px;
                height: 30px;
                font-size: 0.8rem;
            }
            
            .option {
                min-height: 30px;
                padding: 4px 6px;
                font-size: 0.7rem;
            }
            
            .option-letter {
                width: 18px;
                height: 18px;
                font-size: 0.65rem;
            }
            
            .btn {
                padding: 5px 8px;
                font-size: 0.7rem;
            }
            
            .rationale {
                max-height: 60px;
                padding: 6px;
            }
            
            .rationale p {
                font-size: 0.7rem;
                line-height: 1.3;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üö∂ Chapter 12: Health Promotion of the Toddler and Family</h1>
            <div class="subtitle">Toddler Development & Exploration Theme - Energetic Green & Growth Colors</div>
            <div class="stats">
                <div class="stat">üìö 47 Questions</div>
                <div class="stat">üéØ Immediate Feedback</div>
                <div class="stat">üö∂ Toddler Development Focus</div>
                <div class="stat">üè† Family Health Promotion</div>
            </div>
        </div>
        <div class="progress">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        
        <div class="section-nav">
            <button class="section-btn active" onclick="setSection('multiple-choice')">Multiple Choice (34)</button>
            <button class="section-btn" onclick="setSection('multiple-response')">Multiple Response (9)</button>
            <button class="section-btn" onclick="setSection('matching')">Matching (5)</button>
            <button class="section-btn" onclick="setSection('all')">All Mixed (48)</button>
        </div>
        
        <div class="flashcard">
            <div class="question-container">
                <div class="question-icon" id="questionNumber">1</div>
                <div class="question" id="question"></div>
                <div class="multiple-select-indicator" id="multipleSelectIndicator" style="display: none;">Multiple Answers</div>
            </div>
            
            <div class="multiple-select-instructions" id="multipleSelectInstructions" style="display: none;">
                üí° Select ALL correct answers
            </div>
            
            <div class="options" id="options"></div>
            
            <div class="matching-container" id="matchingContainer" style="display: none;">
                <div class="matching-question" id="matchingQuestion"></div>
                <div class="matching-options" id="matchingOptions"></div>
            </div>
            
            <button class="btn cancel-selection" id="cancelBtn" onclick="cancelSelection()">
                üîÑ Reset
            </button>
            
            <div class="feedback" id="feedback">
                <div class="feedback-icon" id="feedbackIcon"></div>
                <div id="feedbackText"></div>
            </div>
            <div class="rationale" id="rationale">
                <h4>üí° Rationale:</h4>
                <p id="rationaleText"></p>
            </div>
        </div>
        
        <div class="navigation">
            <button class="btn btn-secondary" id="prevBtn" onclick="previousCard()">
                ‚¨ÖÔ∏è Prev
            </button>
            <div class="counter" id="counter">1/34</div>
            <button class="btn btn-warning" id="submitBtn" onclick="submitAnswer()" style="display: none;">
                ‚úÖ Submit
            </button>
            <button class="btn btn-primary" id="nextBtn" onclick="nextCard()">
                Next ‚û°Ô∏è
            </button>
        </div>
    </div>

    <script>
        // Chapter 12 Data - Health Promotion of the Toddler and Family
        const sections = {
            'multiple-choice': [
                {
                    question: "What factor is most important in predisposing toddlers to frequent infections?",
                    options: [
                        "Respirations are abdominal.",
                        "Pulse and respiratory rates in toddlers are slower than those in infants.",
                        "Defense mechanisms are less efficient than those during infancy.",
                        "Toddlers have short, straight internal ear canals and large lymph tissue."
                    ],
                    correct: 3,
                    rationale: "Toddlers continue to have the short, straight internal ear canals of infants. The lymphoid tissue of the tonsils and adenoids continues to be relatively large. These two anatomic conditions combine to predispose toddlers to frequent infections."
                },
                {
                    question: "What do the psychosocial developmental tasks of toddlerhood include?",
                    options: [
                        "Development of a conscience",
                        "Recognition of sex differences",
                        "Ability to get along with age mates",
                        "Ability to delay gratification"
                    ],
                    correct: 3,
                    rationale: "If the need for basic trust has been satisfied, then toddlers can give up dependence for control, independence, and autonomy. One of the tasks that toddlers are concerned with is the ability to delay gratification."
                },
                {
                    question: "The developmental task with which the child of 15 to 30 months is likely to be struggling is a sense of which?",
                    options: ["Trust", "Initiative", "Intimacy", "Autonomy"],
                    correct: 3,
                    rationale: "Autonomy versus shame and doubt is the developmental task of toddlers. Trust versus mistrust is the developmental stage of infancy. Initiative versus guilt is the developmental stage of early childhood."
                },
                {
                    question: "Parents of an 18-month-old boy tell the nurse that he says no to everything and has rapid mood swings. If he is scolded, he shows anger and then immediately wants to be held. What is the nurse's best interpretation of this behavior?",
                    options: [
                        "This is normal behavior for his age.",
                        "This is unusual behavior for his age.",
                        "He is not effectively coping with stress.",
                        "He is showing he needs more attention."
                    ],
                    correct: 0,
                    rationale: "Toddlers use distinct behaviors in the quest for autonomy. They express their will with continued negativity and use of the word no. Children at this age also have rapid mood swings. The nurse should reassure the parents that their child is engaged in expected behavior for an 18-month-old."
                },
                {
                    question: "A 17-month-old child should be expected to be in which stage, according to Piaget?",
                    options: ["Preoperations", "Concrete operations", "Tertiary circular reactions", "Secondary circular reactions"],
                    correct: 2,
                    rationale: "A 17-month-old is in the fifth stage of the sensorimotor phase, tertiary circular reactions. The child uses active experimentation to achieve previously unattainable goals."
                },
                {
                    question: "Although a 14-month-old girl received a shock from an electrical outlet recently, her parent finds her about to place a paper clip in another outlet. Which is the best interpretation of this behavior?",
                    options: [
                        "Her cognitive development is delayed.",
                        "This is typical behavior because toddlers are not very developed.",
                        "This is typical behavior because of toddlers inability to transfer remembering to new situations.",
                        "This is not typical behavior because toddlers should know better than to repeat an act that caused pain."
                    ],
                    correct: 2,
                    rationale: "During the tertiary circular reactions stage, children have only a rudimentary sense of the classification of objects. The appearance of an object denotes its function for these children. The slot of an outlet is for putting things into."
                },
                {
                    question: "A toddler, age 16 months, falls down a few stairs. He gets up and scolds the stairs as if they caused him to fall. What is this an example of?",
                    options: ["Animism", "Ritualism", "Irreversibility", "Delayed cognitive development"],
                    correct: 0,
                    rationale: "Animism is the attribution of lifelike qualities to inanimate objects. By scolding the stairs, the toddler is attributing human characteristics to them."
                },
                {
                    question: "What is a characteristic of a toddler's language development at age 18 months?",
                    options: [
                        "Vocabulary of 25 words",
                        "Use of holophrases",
                        "Increasing level of understanding",
                        "Approximately one third of speech understandable"
                    ],
                    correct: 2,
                    rationale: "During the second year of life, the understanding and comprehension of speech increase to a level far greater than the child's vocabulary. An 18-month-old child has a vocabulary of approximately 10 words."
                },
                {
                    question: "Which characteristic best describes the gross motor skills of a 24-month-old child?",
                    options: ["Skips", "Broad jumps", "Rides tricycle", "Walks up and down stairs"],
                    correct: 3,
                    rationale: "A 24-month-old child can go up and down stairs alone with two feet on each step. Skipping and broad jumping are skills acquired at age 3 years. Tricycle riding is achieved at age 4 years."
                },
                {
                    question: "What developmental characteristic does not occur until a child reaches age 2 1/2 years?",
                    options: [
                        "Birth weight has doubled.",
                        "Anterior fontanel is still open.",
                        "Primary dentition is complete.",
                        "Binocularity may be established."
                    ],
                    correct: 2,
                    rationale: "Usually by age 30 months, the primary dentition of 20 teeth is complete. Birth weight doubles at approximately ages 5 to 6 months. The anterior fontanel closes at ages 12 to 18 months. Binocularity is established by age 15 months."
                },
                {
                    question: "Which statement is correct about toilet training?",
                    options: [
                        "Bladder training is usually accomplished before bowel training.",
                        "Wanting to please the parent helps motivate the child to use the toilet.",
                        "Watching older siblings use the toilet confuses the child.",
                        "Children must be forced to sit on the toilet when first learning."
                    ],
                    correct: 1,
                    rationale: "Voluntary control of the anal and urethral sphincters is achieved sometime after the child is walking. The child must be able to recognize the urge to let go and to hold on. The child must want to please the parent by holding on rather than pleasing him- or herself by letting go."
                },
                {
                    question: "The parents of a newborn say that their toddler 'hates the baby... He suggested that we put him in the trash can so the trash truck could take him away.' What is the nurse's best reply?",
                    options: [
                        "Let's see if we can figure out why he hates the new baby.",
                        "That's a strong statement to come from such a small boy.",
                        "Let's refer him to counseling to work this hatred out. It's not a normal response.",
                        "That is a normal response to the birth of a sibling. Let's look at ways to deal with this."
                    ],
                    correct: 3,
                    rationale: "The arrival of a new infant represents a crisis for even the best prepared toddler. Toddlers have their entire schedules and routines disrupted because of the new family member. The nurse should work with the parents on ways to involve the toddler in the newborn's care."
                },
                {
                    question: "A toddler's parent asks the nurse for suggestions on dealing with temper tantrums. What is the most appropriate recommendation?",
                    options: [
                        "Punish the child.",
                        "Explain to child that this is wrong.",
                        "Leave the child alone until the tantrum is over.",
                        "Remain close by the child but without eye contact."
                    ],
                    correct: 3,
                    rationale: "The best way to deal with temper tantrums is to ignore the behaviors, provided that the actions are not dangerous to the child. The presence of the parent is necessary both for safety and to provide a feeling of control and security to the child when the tantrum is over."
                },
                {
                    question: "A parent asks the nurse about negativism in toddlers. What is the most appropriate recommendation?",
                    options: [
                        "Punish the child.",
                        "Provide more attention.",
                        "Ask child not to always say no.",
                        "Reduce the opportunities for a no answer."
                    ],
                    correct: 3,
                    rationale: "The nurse should suggest to the parent that questions should be phrased with realistic choices rather than yes or no answers. This provides a sense of control for the toddler and reduces the opportunity for negativism."
                },
                {
                    question: "The parents of a 2-year-old child tell the nurse they are concerned because the toddler has started to use baby talk since the arrival of their new baby. What should the nurse recommend?",
                    options: [
                        "Ignore the baby talk.",
                        "Tell the toddler frequently, 'You are a big kid now.'",
                        "Explain to the toddler that baby talk is for babies.",
                        "Encourage the toddler to practice more advanced patterns of speech."
                    ],
                    correct: 0,
                    rationale: "Baby talk is a sign of regression in the toddler. Often toddlers attempt to cope with a stressful situation by reverting to patterns of behavior that were successful in earlier stages of development. It should be ignored while the parents praise the child for developmentally appropriate behaviors."
                },
                {
                    question: "Parents tell the nurse that their toddler eats little at mealtime, only sits at the table with the family briefly, and wants snacks all the time. What should the nurse recommend?",
                    options: [
                        "Give her nutritious snacks.",
                        "Offer rewards for eating at mealtimes.",
                        "Avoid snacks so she is hungry at mealtimes.",
                        "Explain to her in a firm manner what is expected of her."
                    ],
                    correct: 0,
                    rationale: "Most toddlers exhibit a physiologic anorexia in response to the decreased nutritional requirements associated with the slower growth rate. Parents should assist the child in developing healthy eating habits. Frequent nutritious snacks are a good way to ensure proper nutrition."
                },
                {
                    question: "A father tells the nurse that his daughter wants the same plate and cup used at every meal, even if they go to a restaurant. The nurse should explain that this is what?",
                    options: [
                        "A sign the child is spoiled",
                        "An attempt to exert unhealthy control",
                        "Regression, which is common at this age",
                        "Ritualism, an expected behavior at this age"
                    ],
                    correct: 3,
                    rationale: "The child is exhibiting ritualism, which is characteristic at this age. Ritualism is the need to maintain sameness and reliability. It provides a sense of structure and comfort to the toddler."
                },
                {
                    question: "The nurse is discussing with a parent group the importance of fluoride for healthy teeth. What should the nurse recommend?",
                    options: [
                        "Determine whether the water supply is fluoridated.",
                        "Use fluoridated mouth rinses in children older than 1 year.",
                        "Give fluoride supplements to infants beginning at age 2 months.",
                        "Brush teeth with fluoridated toothpaste unless the fluoride content of water supply is adequate."
                    ],
                    correct: 0,
                    rationale: "The decision about fluoride supplementation cannot be made until it is known whether the water supply contains fluoride and the amount. It is difficult to teach toddlers to spit out mouthwash. Fluoride supplementation is not recommended until after age 6 months."
                },
                {
                    question: "Which is an appropriate recommendation in preventing tooth decay in young children?",
                    options: [
                        "Substitute raisins for candy.",
                        "Substitute sugarless gum for regular gum.",
                        "Use honey or molasses instead of refined sugar.",
                        "When sweets are to be eaten, select a time not during meals."
                    ],
                    correct: 1,
                    rationale: "Regular gum has high sugar content. When the child chews gum, the sugar is in prolonged contact with the teeth. Sugarless gum is less cariogenic than regular gum. Raisins, honey, and molasses are highly cariogenic and should be avoided."
                },
                {
                    question: "What is the leading cause of death during the toddler period?",
                    options: ["Injuries", "Infectious diseases", "Childhood diseases", "Congenital disorders"],
                    correct: 0,
                    rationale: "Injuries are the most common cause of death in children ages 1 through 4 years. It is the highest rate of death from injuries of any childhood age group except adolescence."
                },
                {
                    question: "The parent of 16-month-old child asks, 'What is the best way to keep my child from getting into our medicines at home?' What should the nurse advise?",
                    options: [
                        "All medicines should be locked securely away.",
                        "The medicines should be placed in high cabinets.",
                        "Your child just needs to be taught not to touch medicines.",
                        "Medicines should not be kept in the homes of small children."
                    ],
                    correct: 0,
                    rationale: "The major reason for poisoning in the home is improper storage. Toddlers can climb, unlatch cabinets, and obtain access to high-security places. For medications, only a locked cabinet is safe."
                },
                {
                    question: "Parents are switching their toddler, who has met the weight requirement, from a rear-facing car seat to a forward-facing seat. The nurse should recommend the parents place the seat where in the car?",
                    options: [
                        "In the front passenger seat",
                        "In the middle of the rear seat",
                        "In the rear seat behind the driver",
                        "In the rear seat behind the passenger"
                    ],
                    correct: 1,
                    rationale: "Children 0 to 3 years of age riding properly restrained in the middle of the backseat have a 43% lower risk of injury than children riding in the outboard (window) seat during a crash."
                },
                {
                    question: "What is the most common type of burn in the toddler age group?",
                    options: [
                        "Electric burn from electrical outlets",
                        "Flame burn from playing with matches",
                        "Hot object burn from cigarettes or irons",
                        "Scald burn from high-temperature tap water"
                    ],
                    correct: 3,
                    rationale: "Scald burns are the most common type of thermal injury in children, especially 1- and 2-year-old children. Temperature should be reduced on the hot water in the house and hot liquids placed out of the child's reach."
                },
                {
                    question: "The nurse is assessing a 20-month-old toddler during a well-child visit and notices tooth decay. The nurse should understand that early childhood caries are caused by what?",
                    options: [
                        "Allowing the child to eat citrus foods at bedtime",
                        "A hereditary factor that cannot be prevented",
                        "Poor fluoride supply in the drinking water",
                        "Giving the child a bottle of juice or milk at naptime"
                    ],
                    correct: 3,
                    rationale: "One cause of early childhood caries is allowing the child to go to sleep with a bottle of milk or juice; as the sweet liquid pools in the mouth, the teeth are bathed for several hours in this cariogenic environment."
                },
                {
                    question: "The nurse is providing guidance strategies to a group of parents with toddlers at a community outreach program. Which statement by a parent indicates a correct understanding of the teaching?",
                    options: [
                        "I should expect my 24-month-old child to express some signs of readiness for toilet training.",
                        "I should be firm and structured when disciplining my 18-month-old child.",
                        "I should expect my 12-month-old child to start to develop a fear of darkness and to need a security blanket.",
                        "I should expect my 36-month-old child to understand time and proximity of events."
                    ],
                    correct: 0,
                    rationale: "A 24-month-old toddler starts to show readiness for toilet training; it is important for the parent to be aware of this and be ready to start the process."
                },
                {
                    question: "The nurse is assessing a toddler's visual acuity. Which visual acuity is considered acceptable during the toddler years?",
                    options: ["20/20", "20/40", "20/50", "20/60"],
                    correct: 1,
                    rationale: "Visual acuity of 20/40 is considered acceptable during the toddler years."
                },
                {
                    question: "The nurse is teaching parents about toilet training. What should the nurse include in the teaching session?",
                    options: [
                        "Bladder training is accomplished before bowel training.",
                        "The mastery of skills required for toilet training is present at 18 months.",
                        "By 12 months, the child is able to retain urine for up to 2 hours or longer.",
                        "The physiologic ability to control the sphincters occurs between 18 and 24 months."
                    ],
                    correct: 3,
                    rationale: "The physiologic ability to control the sphincters occurs somewhere between ages 18 and 24 months. Bowel training is usually accomplished before bladder training."
                },
                {
                    question: "The nurse is planning care for a hospitalized toddler. What is the rationale for planning to continue the toddler's rituals while hospitalized?",
                    options: ["To provide security", "To prevent regression", "To prevent dependency", "To decrease negativism"],
                    correct: 0,
                    rationale: "Ritualism, the need to maintain sameness and reliability, provides a sense of security and comfort. It will not prevent regression or dependency or decrease negativism."
                },
                {
                    question: "A nurse is observing children playing in the playroom. What describes parallel play?",
                    options: [
                        "A child playing a video game",
                        "Two children playing a card game",
                        "Two children watching a movie on a television",
                        "A child playing with blocks next to a child playing with trucks"
                    ],
                    correct: 3,
                    rationale: "Parallel play is when a toddler plays alongside, not with, other children. A child playing with blocks next to a child playing with trucks is descriptive of parallel play."
                },
                {
                    question: "Parents ask the nurse for strategies to help their toddler adjust to a new baby. What should the nurse suggest?",
                    options: [
                        "Start talking about the baby very early in the pregnancy.",
                        "Move the toddler to a new bed after the baby comes home.",
                        "Tell the toddler that a new playmate will be coming home soon.",
                        "Alert visitors to the new baby to include the toddler in the visit."
                    ],
                    correct: 3,
                    rationale: "Parents can minimize sibling rivalry by alerting visitors to the toddler's needs, having small presents on hand for the toddler, and including the child in the visits as much as possible."
                },
                {
                    question: "Parents ask the nurse, 'How should we deal with our toddler's regression since our new baby has come home?' The nurse should give the parents which response?",
                    options: [
                        "Introduce new areas of learning.",
                        "Use time-out as punishment when regression occurs.",
                        "Ignore the behavior and praise appropriate behavior.",
                        "Explain to the toddler that the behavior is not acceptable."
                    ],
                    correct: 2,
                    rationale: "When regression does occur, the best approach is to ignore it while praising existing patterns of appropriate behavior."
                },
                {
                    question: "The nurse understands that which guideline should be followed to determine serving sizes for toddlers?",
                    options: [
                        "1/2 tbsp of solid food per year of age",
                        "1 tbsp of solid food per year of age",
                        "2 tbsp of solid food per year of age",
                        "2 1/2 tbsp of solid food per year of age"
                    ],
                    correct: 1,
                    rationale: "To determine serving sizes for young children, the guideline to follow is 1 tbsp of solid food per year of age."
                },
                {
                    question: "The nurse is teaching parents about avoiding accidental burns with their toddler. What water heater setting should the nurse recommend to the parents?",
                    options: ["120¬∞F", "130¬∞F", "140¬∞F", "150¬∞F"],
                    correct: 0,
                    rationale: "The water heater should be set to limit household water temperatures to less than 120¬∞F. At this temperature, it takes 10 minutes for exposure to the water to cause a full-thickness burn."
                },
                {
                    question: "To avoid a fall from a crib, the nurse recommends to parents that their toddler should sleep in a bed rather than a crib when reaching what height?",
                    options: ["30 in", "35 in", "40 in", "45 in"],
                    correct: 1,
                    rationale: "When children reach a height of 35 inches, they should sleep in a bed rather than a crib."
                },
                {
                    question: "A health care provider prescribes sodium fluoride drops, 0.25 mg PO daily. The medication label states: Sodium fluoride drops 0.5 mg/1 mL. How many milliliters will the nurse prepare to administer one dose?",
                    options: ["0.1 mL", "0.25 mL", "0.5 mL", "1.0 mL"],
                    correct: 2,
                    rationale: "Using the formula: mL = (Desired dose / Dose on hand) √ó Volume on hand = (0.25 mg / 0.5 mg) √ó 1 mL = 0.5 mL"
                }
            ],
            
            'multiple-response': [
                {
                    question: "The nurse is preparing a staff education program about growth and development of an 18-month-old toddler. Which characteristics should the nurse include in the staff education program? (Select all that apply.)",
                    options: [
                        "Eats well with a spoon and cup",
                        "Runs clumsily and can walk up stairs",
                        "Points to common objects",
                        "Builds a tower of three or four blocks",
                        "Has a vocabulary of 300 words",
                        "Dresses self in simple clothes"
                    ],
                    correct: [0, 1, 2, 3],
                    rationale: "Tasks accomplished by an 18-month-old toddler include eating well with a spoon and cup, running clumsily, walking up stairs, pointing to common objects such as shoes, and building a tower with three or four blocks."
                },
                {
                    question: "A parent asks the nurse, 'When will I know my child is ready for toilet training?' The nurse should include what in the response? (Select all that apply.)",
                    options: [
                        "The child should be able to stay dry for 1 hour.",
                        "The child should be able to sit, walk, and squat.",
                        "The child should have regular bowel movements.",
                        "The child should express a willingness to please."
                    ],
                    correct: [1, 2, 3],
                    rationale: "Signs of toilet training readiness include physical and psychological readiness. The ability to sit, walk, and squat and having regular bowel movements are physical readiness signs. Expressing a willingness to please is a sign of psychological readiness."
                },
                {
                    question: "The nurse is teaching parents of a toddler how to handle temper tantrums. What should the nurse include in the teaching? (Select all that apply.)",
                    options: [
                        "Provide realistic expectations.",
                        "Avoid using rewards for good behavior.",
                        "Ensure consistency among all caregivers in expectations.",
                        "During tantrums, ignore the behavior and continue to be present.",
                        "Use time-outs for managing temper tantrums, starting at 12 months."
                    ],
                    correct: [0, 2, 3],
                    rationale: "The best approach toward tapering temper tantrums requires consistency and developmentally appropriate expectations and rewards. During tantrums, ignore the behavior, provided the behavior is not injurious to the child."
                },
                {
                    question: "What preventive measures should the nurse teach parents of toddlers to prevent early childhood caries? (Select all that apply.)",
                    options: [
                        "Avoid using a bottle as a pacifier.",
                        "Eliminate bedtime bottles completely.",
                        "Place juice in a bottle for the child to drink.",
                        "Wean from the bottle by 18 months of age.",
                        "Avoid coating pacifiers in a sweet substance."
                    ],
                    correct: [0, 1, 4],
                    rationale: "Prevention of dental caries involves eliminating the bedtime bottle completely, not using the bottle as a pacifier, and never coating pacifiers in sweet substances. Juice should be offered in a cup, not a bottle."
                },
                {
                    question: "A toddler is in the sensorimotor, tertiary circular reactions stage of cognitive development. What behavior should the nurse expect to assess? (Select all that apply.)",
                    options: [
                        "Refers to self by pronoun",
                        "Gestures up and down",
                        "Able to insert round object into a hole",
                        "Can find hidden objects but only in the first location",
                        "Uses future-oriented words, such as tomorrow"
                    ],
                    correct: [1, 2, 3],
                    rationale: "Children in the sensorimotor, tertiary circular reactions stage show behaviors of gesturing up and down, ability to insert round objects into a hole, and can find hidden objects but only in the first location."
                },
                {
                    question: "The nurse is teaching a parent of an 18-month-old about developmental milestones associated with feeding. What should the nurse include in the teaching? (Select all that apply.)",
                    options: [
                        "The child will begin to use a fork.",
                        "The child will be able use a straw and cup.",
                        "The child will be able to hold a cup with both hands.",
                        "The child will be able to drink from a cup with a lid.",
                        "The child will begin to use a spoon but may turn it before reaching the mouth."
                    ],
                    correct: [2, 3, 4],
                    rationale: "An 18-month-old child can hold a cup with both hands, is able to drink from a cup with a lid, and begins to use a spoon but may turn it before reaching the mouth."
                },
                {
                    question: "The nurse is preparing to administer some iron drops to a toddler. Which factor can increase iron absorption? (Select all that apply.)",
                    options: [
                        "Vitamin A",
                        "Acidity (low pH)",
                        "Phosphates (milk)",
                        "Malabsorptive disorders",
                        "Ascorbic acid (Vitamin C)"
                    ],
                    correct: [0, 1, 4],
                    rationale: "Factors that increase iron absorption are vitamin A, acidity (low pH), and ascorbic acid (vitamin C). Phosphates (milk) and malabsorptive disorders decrease absorption of iron."
                },
                {
                    question: "A parent tells the nurse, 'My toddler tries to undo the car seat harness and climb out of the seat.' What strategies should the nurse recommend to the parent to encourage the child to stay in the seat? (Select all that apply.)",
                    options: [
                        "Allow your child to hold a favorite toy.",
                        "Allow your child out of the seat occasionally.",
                        "Avoid using rewards to encourage cooperative behavior.",
                        "When child tries to unbuckle the seat harness, firmly say, 'No.'",
                        "It may be necessary to stop the car to reinforce the expected behavior."
                    ],
                    correct: [0, 3, 4],
                    rationale: "Strategies to encourage a child to stay in a car seat include allowing the child to hold favorite toy, firmly saying 'No' if the child begins to undo the harness, and stopping the car to reinforce the expected behavior."
                },
                {
                    question: "What child behavior indicates to the nurse that temper tantrums have become a problem? (Select all that apply.)",
                    options: [
                        "The child is 2 to 3 years old",
                        "Tantrums occur at bedtime",
                        "Tantrums occur past 5 years of age",
                        "Tantrums last longer than 15 minutes",
                        "Tantrums occur more than five times a day"
                    ],
                    correct: [2, 3, 4],
                    rationale: "Temper tantrums that occur past 5 years of age, last longer than 15 minutes, or occur more than five times a day are considered abnormal and may indicate a serious problem."
                }
            ],
            
            'matching': [
                {
                    question: "Which type of vegetarianism excludes all foods of animal origin, including milk and eggs?",
                    options: ["Lacto-ovo vegetarians", "Lactovegetarians", "Pure vegetarians (vegans)", "Semi-vegetarians", "Macrobiotics"],
                    correct: 2,
                    rationale: "Vegans do not consume any animal-derived foods, including dairy, eggs, and honey. This matches the definition of pure vegetarians (vegans)."
                },
                {
                    question: "Which vegetarian diet excludes meat but includes dairy products and occasionally fish?",
                    options: ["Lacto-ovo vegetarians", "Macrobiotics", "Semi-vegetarians", "Lactovegetarians", "Pure vegetarians"],
                    correct: 2,
                    rationale: "Semi-vegetarians generally avoid meat but may sometimes eat fish and poultry, and often include dairy products. This matches the description 'exclude meat from their diet but consumes dairy products with some fish and poultry.'"
                },
                {
                    question: "Lactovegetarians exclude which of the following from their diet?",
                    options: ["Meat only", "Meat and eggs", "Meat, eggs, and fish", "All animal products", "Eggs only"],
                    correct: 1,
                    rationale: "Lactovegetarians exclude meat and eggs but include dairy products. This matches the definition 'exclude meat and eggs but drink milk.'"
                },
                {
                    question: "Which diet eliminates all animal origin foods, allowing only a few types of plant foods?",
                    options: ["Lactovegetarians", "Pure vegetarians", "Macrobiotics", "Semi-vegetarians", "Lacto-ovo vegetarians"],
                    correct: 2,
                    rationale: "Macrobiotics is a restrictive diet that may eliminate all animal foods and allow only certain fruits, vegetables, and legumes, sometimes evolving toward a vegan-like pattern but with specific limitations."
                },
                {
                    question: "Which type of vegetarian includes dairy products and eggs but excludes meat?",
                    options: ["Lactovegetarians", "Pure vegetarians", "Macrobiotics", "Semi-vegetarians", "Lacto-ovo vegetarians"],
                    correct: 4,
                    rationale: "Lacto-ovo vegetarians include dairy products (lacto) and eggs (ovo) in their diet but exclude all meat products."
                }
            ],
            
            'all': []
        };

        // Combine all questions for the 'all' section
        sections['all'] = [
            ...sections['multiple-choice'].map(q => ({...q, section: 'multiple-choice'})),
            ...sections['multiple-response'].map(q => ({...q, section: 'multiple-response'})),
            ...sections['matching'].map(q => ({...q, section: 'matching', isMatching: true}))
        ];

        let currentSection = 'multiple-choice';
        let currentQuestion = 0;
        let selectedOption = null;
        let selectedOptions = [];
        let isSubmitted = false;
        let answers = {
            'multiple-choice': Array(sections['multiple-choice'].length).fill(null),
            'multiple-response': Array(sections['multiple-response'].length).fill({selected: [], submitted: false}),
            'matching': Array(sections['matching'].length).fill(null),
            'all': Array(sections['all'].length).fill(null)
        };

        function setSection(section) {
            currentSection = section;
            currentQuestion = 0;
            selectedOption = null;
            selectedOptions = [];
            isSubmitted = false;
            
            document.querySelectorAll('.section-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            loadQuestion();
        }

        function isMultipleResponseQuestion() {
            if (currentSection === 'all') {
                const questionData = getCurrentQuestionData();
                return questionData?.section === 'multiple-response' || Array.isArray(questionData?.correct);
            }
            return currentSection === 'multiple-response';
        }

        function isMatchingSection() {
            if (currentSection === 'all') {
                const questionData = getCurrentQuestionData();
                return questionData?.isMatching || questionData?.section === 'matching';
            }
            return currentSection === 'matching';
        }

        function getCurrentQuestionData() {
            if (currentSection === 'all') {
                return sections['all'][currentQuestion] || null;
            } else {
                return sections[currentSection][currentQuestion];
            }
        }

        function loadQuestion() {
            const questionData = getCurrentQuestionData();
            
            if (!questionData) return;
            
            const isMatching = isMatchingSection();
            const isMultipleResponse = isMultipleResponseQuestion();
            
            // Update UI elements visibility
            document.getElementById('matchingContainer').style.display = isMatching ? 'flex' : 'none';
            document.getElementById('options').style.display = isMatching ? 'none' : 'flex';
            document.getElementById('multipleSelectIndicator').style.display = isMultipleResponse ? 'block' : 'none';
            document.getElementById('multipleSelectInstructions').style.display = isMultipleResponse ? 'block' : 'none';
            document.getElementById('cancelBtn').classList.remove('show');
            document.getElementById('submitBtn').style.display = isMultipleResponse ? 'flex' : 'none';
            document.getElementById('questionNumber').textContent = currentQuestion + 1;
            
            let totalQuestions = getTotalQuestions();
            
            const progress = ((currentQuestion + 1) / totalQuestions) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
            document.getElementById('counter').textContent = `${currentQuestion + 1}/${totalQuestions}`;
            
            if (isMatching) {
                document.getElementById('matchingQuestion').textContent = questionData.question;
                loadMatchingOptions(questionData);
            } else {
                document.getElementById('question').textContent = questionData.question;
                loadOptions(questionData);
            }
            
            document.getElementById('feedback').style.display = 'none';
            document.getElementById('rationale').classList.remove('show');
            
            document.getElementById('prevBtn').disabled = currentQuestion === 0;
            const isLastQuestion = currentQuestion >= totalQuestions - 1;
            document.getElementById('nextBtn').textContent = isLastQuestion ? 'Finish ‚û°Ô∏è' : 'Next ‚û°Ô∏è';
            document.getElementById('nextBtn').disabled = true;
            
            // Load saved answer state
            const storedAnswer = answers[currentSection][currentQuestion];
            if (storedAnswer !== null && storedAnswer !== undefined) {
                if (isMultipleResponse) {
                    selectedOptions = storedAnswer.selected || [];
                    isSubmitted = storedAnswer.submitted || false;
                    
                    if (isSubmitted) {
                        showFeedbackForMultipleResponse(questionData);
                        document.getElementById('nextBtn').disabled = false;
                        document.getElementById('submitBtn').disabled = true;
                    } else {
                        highlightSelectedOptionsForMultipleResponse();
                        document.getElementById('submitBtn').disabled = selectedOptions.length === 0;
                        document.getElementById('nextBtn').disabled = false;
                        if (selectedOptions.length > 0) {
                            document.getElementById('cancelBtn').classList.add('show');
                        }
                    }
                } else if (isMatching) {
                    selectedOption = storedAnswer;
                    highlightMatchingOption(storedAnswer, questionData);
                    showFeedback(storedAnswer, questionData);
                    document.getElementById('nextBtn').disabled = false;
                    document.getElementById('cancelBtn').classList.add('show');
                } else {
                    selectedOption = storedAnswer;
                    highlightSelectedOption(storedAnswer, questionData);
                    showFeedback(storedAnswer, questionData);
                    document.getElementById('nextBtn').disabled = false;
                    document.getElementById('cancelBtn').classList.add('show');
                }
            } else {
                selectedOption = null;
                selectedOptions = [];
                isSubmitted = false;
                if (isMultipleResponse) {
                    document.getElementById('submitBtn').disabled = true;
                }
            }
        }

        function loadMatchingOptions(questionData) {
            const matchingOptions = document.getElementById('matchingOptions');
            matchingOptions.innerHTML = '';
            
            if (questionData.options) {
                questionData.options.forEach((option, index) => {
                    const optionDiv = document.createElement('div');
                    optionDiv.className = 'matching-option';
                    optionDiv.textContent = `${String.fromCharCode(65 + index)}) ${option}`;
                    optionDiv.onclick = () => selectMatchingOption(index, questionData);
                    matchingOptions.appendChild(optionDiv);
                });
                
                const storedAnswer = answers[currentSection][currentQuestion];
                if (storedAnswer !== null && storedAnswer !== undefined) {
                    highlightMatchingOption(storedAnswer, questionData);
                }
            }
        }

        function loadOptions(questionData) {
            const optionsContainer = document.getElementById('options');
            optionsContainer.innerHTML = '';
            
            if (questionData.options && questionData.options.length > 0) {
                questionData.options.forEach((option, index) => {
                    const optionElement = document.createElement('div');
                    optionElement.className = 'option';
                    optionElement.innerHTML = `
                        <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                        <div class="option-text">${option}</div>
                    `;
                    optionElement.onclick = () => selectOption(index, questionData);
                    optionsContainer.appendChild(optionElement);
                });
            } else {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">A</div>
                    <div class="option-text">No options available for this question</div>
                `;
                optionsContainer.appendChild(optionElement);
            }
        }

        function selectOption(index, questionData) {
            if (!questionData) questionData = getCurrentQuestionData();
            
            if (isMultipleResponseQuestion()) {
                handleMultipleResponseSelect(index, questionData);
            } else {
                handleSingleSelect(index, questionData);
            }
        }

        function handleSingleSelect(index, questionData) {
            if (!questionData) questionData = getCurrentQuestionData();
            
            answers[currentSection][currentQuestion] = index;
            selectedOption = index;
            
            highlightSelectedOption(index, questionData);
            showFeedback(index, questionData);
            document.getElementById('nextBtn').disabled = false;
            document.getElementById('cancelBtn').classList.add('show');
        }

        function handleMultipleResponseSelect(index, questionData) {
            if (!questionData) questionData = getCurrentQuestionData();
            if (isSubmitted) return;
            
            const optionIndex = selectedOptions.indexOf(index);
            if (optionIndex === -1) {
                selectedOptions.push(index);
            } else {
                selectedOptions.splice(optionIndex, 1);
            }
            
            const options = document.querySelectorAll('.option');
            options.forEach((option, i) => {
                option.classList.remove('selected', 'correct', 'incorrect');
                if (selectedOptions.includes(i)) {
                    option.classList.add('selected');
                }
            });
            
            if (!answers[currentSection][currentQuestion]) {
                answers[currentSection][currentQuestion] = {selected: [], submitted: false};
            }
            answers[currentSection][currentQuestion].selected = selectedOptions;
            answers[currentSection][currentQuestion].submitted = false;
            
            document.getElementById('submitBtn').disabled = selectedOptions.length === 0;
            document.getElementById('nextBtn').disabled = false;
            document.getElementById('cancelBtn').classList.toggle('show', selectedOptions.length > 0);
        }

        function selectMatchingOption(index, questionData) {
            if (!questionData) questionData = getCurrentQuestionData();
            
            answers[currentSection][currentQuestion] = index;
            selectedOption = index;
            
            document.querySelectorAll('.matching-option').forEach(option => {
                option.classList.remove('selected', 'correct', 'incorrect');
            });
            
            const selectedOptionElement = document.querySelectorAll('.matching-option')[index];
            selectedOptionElement.classList.add('selected');
            
            if (index === questionData.correct) {
                selectedOptionElement.classList.add('correct');
            } else {
                selectedOptionElement.classList.add('incorrect');
                document.querySelectorAll('.matching-option')[questionData.correct].classList.add('correct');
            }
            
            showFeedback(index, questionData);
            document.getElementById('nextBtn').disabled = false;
            document.getElementById('cancelBtn').classList.add('show');
        }

        function highlightMatchingOption(index, questionData) {
            if (!questionData) questionData = getCurrentQuestionData();
            
            const options = document.querySelectorAll('.matching-option');
            
            options.forEach((option, i) => {
                option.classList.remove('selected', 'correct', 'incorrect');
                if (i === index) {
                    option.classList.add('selected');
                    if (i === questionData.correct) {
                        option.classList.add('correct');
                    } else {
                        option.classList.add('incorrect');
                        options[questionData.correct].classList.add('correct');
                    }
                }
            });
        }

        function highlightSelectedOption(index, questionData) {
            if (!questionData) questionData = getCurrentQuestionData();
            
            const options = document.querySelectorAll('.option');
            
            options.forEach((option, i) => {
                option.classList.remove('selected', 'correct', 'incorrect');
                
                if (i === index) {
                    if (i === questionData.correct) {
                        option.classList.add('correct');
                    } else {
                        option.classList.add('incorrect');
                        if (questionData.correct !== undefined) {
                            options[questionData.correct].classList.add('correct');
                        }
                    }
                }
            });
        }

        function highlightSelectedOptionsForMultipleResponse() {
            const options = document.querySelectorAll('.option');
            
            options.forEach((option, i) => {
                option.classList.remove('selected', 'correct', 'incorrect');
                if (selectedOptions.includes(i)) {
                    option.classList.add('selected');
                }
            });
        }

        function submitAnswer() {
            if (selectedOptions.length === 0) return;
            
            isSubmitted = true;
            
            if (!answers[currentSection][currentQuestion]) {
                answers[currentSection][currentQuestion] = {selected: [], submitted: false};
            }
            answers[currentSection][currentQuestion].submitted = true;
            
            const questionData = getCurrentQuestionData();
            showFeedbackForMultipleResponse(questionData);
            document.getElementById('nextBtn').disabled = false;
            document.getElementById('submitBtn').disabled = true;
            document.getElementById('cancelBtn').classList.remove('show');
        }

        function showFeedback(index, questionData) {
            if (!questionData) questionData = getCurrentQuestionData();
            
            const feedback = document.getElementById('feedback');
            const feedbackIcon = document.getElementById('feedbackIcon');
            const feedbackText = document.getElementById('feedbackText');
            const rationale = document.getElementById('rationale');
            const rationaleText = document.getElementById('rationaleText');
            
            if (index === questionData.correct) {
                feedback.className = 'feedback correct';
                feedbackIcon.textContent = '‚úÖ';
                feedbackText.textContent = 'Correct! Well done.';
            } else {
                feedback.className = 'feedback incorrect';
                feedbackIcon.textContent = '‚ùå';
                const correctLetter = String.fromCharCode(65 + questionData.correct);
                feedbackText.textContent = `Incorrect. Correct: ${correctLetter}`;
            }
            
            feedback.style.display = 'flex';
            rationaleText.textContent = questionData.rationale;
            rationale.classList.add('show');
        }

        function showFeedbackForMultipleResponse(questionData) {
            if (!questionData) questionData = getCurrentQuestionData();
            
            const feedback = document.getElementById('feedback');
            const feedbackIcon = document.getElementById('feedbackIcon');
            const feedbackText = document.getElementById('feedbackText');
            const rationale = document.getElementById('rationale');
            const rationaleText = document.getElementById('rationaleText');
            
            const allCorrectSelected = questionData.correct.every(c => selectedOptions.includes(c));
            const noIncorrectSelected = selectedOptions.every(s => questionData.correct.includes(s));
            
            const options = document.querySelectorAll('.option');
            options.forEach((option, i) => {
                option.classList.remove('selected', 'correct', 'incorrect');
                if (questionData.correct.includes(i)) {
                    option.classList.add('correct');
                }
                if (selectedOptions.includes(i) && !questionData.correct.includes(i)) {
                    option.classList.add('incorrect');
                }
            });
            
            if (allCorrectSelected && noIncorrectSelected) {
                feedback.className = 'feedback correct';
                feedbackIcon.textContent = '‚úÖ';
                feedbackText.textContent = 'Perfect! All correct selected.';
            } else if (allCorrectSelected && !noIncorrectSelected) {
                feedback.className = 'feedback incorrect';
                feedbackIcon.textContent = '‚ö†Ô∏è';
                feedbackText.textContent = 'Almost! All correct + some incorrect.';
            } else if (!allCorrectSelected && noIncorrectSelected) {
                feedback.className = 'feedback incorrect';
                feedbackIcon.textContent = '‚ö†Ô∏è';
                feedbackText.textContent = 'Partially correct! Some correct, missed others.';
            } else {
                feedback.className = 'feedback incorrect';
                feedbackIcon.textContent = '‚ùå';
                feedbackText.textContent = 'Incorrect. Missed correct & selected incorrect.';
            }
            
            feedback.style.display = 'flex';
            rationaleText.textContent = questionData.rationale;
            rationale.classList.add('show');
        }

        function cancelSelection() {
            const questionData = getCurrentQuestionData();
            
            if (isMultipleResponseQuestion()) {
                selectedOptions = [];
                isSubmitted = false;
                
                const options = document.querySelectorAll('.option');
                options.forEach(option => {
                    option.classList.remove('selected', 'correct', 'incorrect');
                });
                
                if (answers[currentSection][currentQuestion]) {
                    answers[currentSection][currentQuestion] = {selected: [], submitted: false};
                }
                
                document.getElementById('nextBtn').disabled = true;
                document.getElementById('submitBtn').disabled = true;
                document.getElementById('feedback').style.display = 'none';
                document.getElementById('rationale').classList.remove('show');
                document.getElementById('cancelBtn').classList.remove('show');
            } else if (isMatchingSection()) {
                answers[currentSection][currentQuestion] = null;
                selectedOption = null;
                
                document.querySelectorAll('.matching-option').forEach(option => {
                    option.classList.remove('selected', 'correct', 'incorrect');
                });
                
                document.getElementById('feedback').style.display = 'none';
                document.getElementById('rationale').classList.remove('show');
                document.getElementById('nextBtn').disabled = true;
                document.getElementById('cancelBtn').classList.remove('show');
            } else {
                answers[currentSection][currentQuestion] = null;
                selectedOption = null;
                
                const options = document.querySelectorAll('.option');
                options.forEach(option => {
                    option.classList.remove('selected', 'correct', 'incorrect');
                });
                
                document.getElementById('feedback').style.display = 'none';
                document.getElementById('rationale').classList.remove('show');
                document.getElementById('nextBtn').disabled = true;
                document.getElementById('cancelBtn').classList.remove('show');
            }
        }

        function nextCard() {
            const totalQuestions = getTotalQuestions();
            
            if (currentQuestion < totalQuestions - 1) {
                currentQuestion++;
                selectedOption = null;
                selectedOptions = [];
                isSubmitted = false;
                loadQuestion();
            } else {
                let correctCount = 0;
                let totalAnswered = 0;
                
                Object.keys(answers).forEach(section => {
                    answers[section].forEach((answer, index) => {
                        if (answer !== null && answer !== undefined) {
                            totalAnswered++;
                            const questionData = getQuestionData(section, index);
                            
                            if (Array.isArray(questionData?.correct)) {
                                if (answer.submitted && Array.isArray(answer.selected)) {
                                    const allCorrect = questionData.correct.every(c => answer.selected.includes(c));
                                    const noIncorrect = answer.selected.every(s => questionData.correct.includes(s));
                                    if (allCorrect && noIncorrect) correctCount++;
                                }
                            } else if (questionData?.isMatching || questionData?.section === 'matching') {
                                if (answer === questionData.correct) correctCount++;
                            } else {
                                if (answer === questionData?.correct) correctCount++;
                            }
                        }
                    });
                });
                
                alert(`Quiz completed!\n\nAnswered: ${totalAnswered}\nCorrect: ${correctCount}\n\nClick OK to restart.`);
                
                currentSection = 'multiple-choice';
                currentQuestion = 0;
                selectedOption = null;
                selectedOptions = [];
                isSubmitted = false;
                answers = {
                    'multiple-choice': Array(sections['multiple-choice'].length).fill(null),
                    'multiple-response': Array(sections['multiple-response'].length).fill({selected: [], submitted: false}),
                    'matching': Array(sections['matching'].length).fill(null),
                    'all': Array(sections['all'].length).fill(null)
                };
                
                setSection('multiple-choice');
            }
        }

        function previousCard() {
            if (currentQuestion > 0) {
                currentQuestion--;
                const storedAnswer = answers[currentSection][currentQuestion];
                
                if (isMultipleResponseQuestion()) {
                    selectedOptions = storedAnswer?.selected || [];
                    isSubmitted = storedAnswer?.submitted || false;
                } else {
                    selectedOption = storedAnswer;
                }
                
                loadQuestion();
            }
        }

        function getTotalQuestions() {
            if (currentSection === 'all') {
                return sections['all'].length;
            } else {
                return sections[currentSection].length;
            }
        }

        function getQuestionData(section, index) {
            if (section === 'all') {
                return sections['all'][index];
            } else {
                return sections[section][index];
            }
        }

        // Initialize
        setSection('multiple-choice');
        
        // Keyboard shortcuts
        document.addEventListener('keydown', function(event) {
            if (event.key >= '1' && event.key <= '5') {
                const index = parseInt(event.key) - 1;
                const questionData = getCurrentQuestionData();
                if (!isMatchingSection()) {
                    selectOption(index, questionData);
                }
            } else if (event.key >= 'a' && event.key <= 'e') {
                const index = event.key.charCodeAt(0) - 97;
                const questionData = getCurrentQuestionData();
                if (!isMatchingSection()) {
                    selectOption(index, questionData);
                }
            } else if (event.key === 'Enter' && isMultipleResponseQuestion()) {
                if (selectedOptions.length > 0 && !isSubmitted) {
                    submitAnswer();
                }
            } else if (event.key === 'ArrowLeft') {
                if (!document.getElementById('prevBtn').disabled) {
                    previousCard();
                }
            } else if (event.key === 'ArrowRight') {
                if (!document.getElementById('nextBtn').disabled) {
                    nextCard();
                }
            } else if (event.key === ' ' || event.key === 'Spacebar') {
                if (!document.getElementById('nextBtn').disabled && !isMultipleResponseQuestion()) {
                    nextCard();
                }
            } else if (event.key === 'Escape') {
                cancelSelection();
            }
        });
    </script>
</body>
</html>